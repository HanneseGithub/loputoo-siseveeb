{% extends "components/tables/table.twig" %}

{% block table_options %}
  {{ parent() }}
  data-show-columns="true"
  data-sort-name="name"
  data-sort-order="asc"
{% endblock %}

{% block table_classes %}
  class="naiskoor-table users-table"
{% endblock %}

{% block table_header %}
  <tr>
    {% if canSendGroupEmails %}
      <th data-searchable="false" data-width="36" class="h-text-center table-cell--fixed users-table__checkbox-js">
        <input onClick="toggleAllUsersCheckboxes(this)" type="checkbox" id="toggle-all-users">
      </th>
    {% endif %}
    <th data-searchable="false" class="h-text-center table-cell--fixed users-table__avatar-js">Pilt</th>
    <th data-sortable="true" data-field="name" class="h-text-left table-cell--fixed users-table__name-js">Liikme nimi</th>
    {% if canSeePersonalId %}
      <th data-sortable="true" class="h-text-left" data-visible="false">Isikukood</th>
    {% endif %}
    <th data-sortable="true" class="h-text-left">Häälerühm ja kõrgus</th>
    <th data-sortable="true" class="h-text-left">Telefoninumber</th>
    <th data-sortable="true" class="h-text-left">Email</th>
    <th data-sortable="true" class="h-text-left">Sünnipäev</th>
    {% if isAdministrator %}
      <th data-sortable="true" class="h-text-left">Roll siseveebis</th>
    {% endif %}
    <th data-sortable="true" data-searchable="false" class="h-text-left" data-visible="false">Noorlaulja</th>
    <th data-sortable="true" data-searchable="false" class="h-text-left" data-visible="false">Tudeng</th>
    <th data-sortable="true" data-searchable="false" class="h-text-left" data-visible="false">Seos Tartu Ülikooliga</th>
    <th data-sortable="true" data-searchable="false" class="h-text-left" data-visible="false">Reservlane</th>
    <th data-sortable="true" class="h-text-left" data-visible="false">Amet naiskooris</th>
    <th data-sortable="true" class="h-text-left" data-visible="false">Lauluema</th>
    <th data-sortable="true" class="h-text-left" data-visible="false">Laululapsed</th>
    {% if canEditUserChoirRoles %}
      <th data-searchable="false" class="h-text-center">Tegevused</th>
    {% endif %}
  </tr>
{% endblock %}

{% block table_body %}
  {% for user in users %}
    <tr>
      {% if canSendGroupEmails %}
        <td>
          <input type="checkbox" value="{{user.user_email}}" class="sendEmailTo">
        </td>
      {% endif %}
      <td>
        {{ function('get_avatar', user.ID, '40' ) }}
      </td>
      <td>
        <a href="{{ function('get_author_url', user.ID) }}" class="open-new-window">
          {% if user.first_name is not empty and user.last_name is not empty %}
            {{ user.first_name ~ ' ' ~ user.last_name }}
          {% else %}
            {{ user.display_name }}
          {% endif %}
        </a>
      </td>
      {% if canSeePersonalId %}
        <td>{{ user.personal_id }}</td>
      {% endif %}
      <td>{{ user.voice_and_pitch }}</td>
      <td>{{ user.phone_number }}</td>
      <td>{{ user.user_email }}</td>
      <td>{{ user.birthday|date("d. F Y") }}</td>
      {% if isAdministrator %}
        <td>{{ returnUserRoleDisplayName(user.roles) }}</td>
      {% endif %}
      <td>{{ user.is_new_singer }}</td>
      <td>{{ user.is_student }}</td>
      <td>{{ user.is_student_or_graduate }}</td>
      <td>{{ user.in_reserve }}</td>
      <td>{{ user.title }}</td>
      <td>{{ user.singing_mentor }}</td>
      <td>{{ user.singing_apprentices }}</td>
      {% if canEditUserChoirRoles %}
        <td>{% include "components/user-info.twig" %}</td>
      {% endif %}
    </tr>
  {% endfor %}
{% endblock %}
