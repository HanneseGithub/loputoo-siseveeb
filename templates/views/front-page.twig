{% extends "base.twig" %}

{% block content %}
    <div class="section h-padding-top-xxl h-padding-bottom-lg">
        {% include "components/webpage-title.twig" with {title: 'Teated', link: createNewPostUrl, link_text: 'Lisa Teade'} %}
        {% if teated is empty%}
            <p class="no-posts">Hetkel pole uusi teateid</p>
        {% else %}
            <div class="home-notifications h-margin-top-lg">
                <div class="home-notifications-container h-margin-bottom-sm">
                    <div class="home-notifcations-border"></div>
                    <div class="notify-text-wrapper">
                        <div class="home-notify-title">
                            <h3>Sünnipäevalised</h3>
                        </div>
                        <div class="home-notify-content">
                            <p>{{ usersWithBirthday }}</p>
                        </div>
                    </div>
                </div>
                {% for teade in teated %}
                    <div class="home-notifications-container h-margin-bottom-sm">
                        <div class="home-notifcations-border"></div>
                        <div class="notify-text-wrapper">
                            <div class="home-notify-title">
                                <h3>{{ teade.title }}</h3>
                            </div>
                            <div class="home-notify-content">
                                <p>{{ teade.description }}</p>
                            </div>
                        </div>
                        {% if canAddNotifications %}
                            <div class="delete-item-button-container">
                                {% include "components/delete-post.twig" with { title: teade.title, id: teade.ID, modifier: 'delete-icon-style' } %}
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>

    <div class="section h-padding-top-lg h-padding-bottom-lg">
        <h2 class="h2 h-margin-bottom-lg">Kalender</h2>
        {% if calendar_events is empty %}
        <p class="no-posts">Hetkel pole kalendris üritusi</p>
        {% else %} {% for calendar_event in calendar_events %}
        <div class="calendar-container {{ loop.last ? '' : 'h-margin-bottom-lg'}}">
            <div class="calendar-date">
                <p class="calendar-date-time">{{calendar_event.start.dateTime| date("F d, Y")}}</p>
            </div>
            <div class="calendar-wrapper">
                <p class="calendar-wrapper-title h-margin-bottom-sm-md">{{ calendar_event.summary }}</p>
                <p class="calendar-date-time h-margin-bottom-sm-md">{{calendar_event.start.dateTime|date_modify("+ 0 hours")| date("F d, Y &#0064; G:i") }} - {{calendar_event.end.dateTime|date_modify("+0 hours") | date("G:i")}}
                </p>
                <a href="{{calendar_event.htmlLink}}" target="_blank">Vaata lähemalt / Lisa Google Calendari </a>
            </div>
        </div>
        {% endfor %} {% endif %}
    </div>

    <div class="section h-padding-top-lg h-padding-bottom-xxl">
        <div class="webpage-heading-container">
        <h2 class="h2 h-margin-bottom-lg">Lähemad üritused</h2>
        <a class="all-event-button h-margin-bottom-lg" href="{{ function('returnUritusedUrl') }}"><p>Tulevased üritused</p> {% include 'components/icon.twig' with { name: 'sprite-arrow-right' }%}</a>
    </div>
        <div class="front-page-events-container">
            {% if events is empty%}
                <p class="no-posts">Hetkel pole üritusi</p>
            {% else %}
                {% for event in events %}
                    <a class="event-click-container-front-page" href="{{event.link}}">
                        <div class="h-margin-bottom-lg single-event-container">
                            <div class="h-margin-bottom-md event-wrapper">
                                {% if not event.image %}
                                    {% set placeholder = Image("#{theme.link}/static/images/event-bg.png") %}
                                    <img src="{{ placeholder.src | resize(750, 500) }}">
                                {% else %}
                                    <img src="{{ Image(event.image).src|resize(750, 500) }}">
                                {% endif %}
                                {% include 'components/events/event-participation.twig' with { event: { event_participation: event.event_participation } } %}
                                <div class="event-date">
                                    <p>{{event.datestart | date("d. F Y") }}</p>
                                </div>
                            </div>
                            <div class="event-title">
                                <h3>{{event.title}}</h3>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            {% endif %}
            </div>
    </div>
{% endblock %}